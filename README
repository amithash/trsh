========================================================================================
                                    TRSH
	 		Copyright 2008 Amithash Prasad                                         

	 Seeker is free software: you can redistribute it and/or modify         
	 it under the terms of the GNU General Public License as published by   
	 the Free Software Foundation, either version 3 of the License, or      
	 (at your option) any later version.                                    
	                                                                        
	 This program is distributed in the hope that it will be useful,        
	 but WITHOUT ANY WARRANTY; without even the implied warranty of         
	 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the          
	 GNU General Public License for more details.                           
	                                                                        
	 You should have received a copy of the GNU General Public License      
	 along with this program.  If not, see <http://www.gnu.org/licenses/>.  

========================================================================================

A safe rm.

I wrote this script when I accidently deleted my homework.

SETUP
--
AUTOMATIC METHOD (Supported shells: bash and korn)
run setup.pl with an argument about your shell:
for BASH:
./setup.pl bash

for C-Shell:
./setup.pl csh

This sets the following:
trash dir = HOME/.Trash
script copied to HOME/.trsh.pl

aliases set for:
rm = ~/.trsh.pl
undo = ~/.trsh.pl -u

If you do not like this, or your shell is not supported, 
try the manual method described below

MANUAL METHOD:

1. copy the trsh.pl to where ever you want,
I usually copy it to my home directory and rename it to .trsh.pl
so I do not see it!

edit your .Xrc file (for bash it is .bashrc, and the examples are for bash)
create an enviornment variable called TRASH_DIR pointing to what you want
to be used as a trash directory.

export TRASH_DIR='~/.Trash'

again, i choose the name of my trash dir to start with a "." therefore I 
do not generally see it on a ls.

then add an alias to stop using the rm command and using this instead.

alias rm='~/.trsh.pl'
alias undo='~/.trsh.pl -u'


USAGE
--

rm -r|-recover FILE
	this will move the deleted file named FILE from the trash to the current dir

rm -v|-view
	This will list the contents of the trash

rm -e|-empty
	This will empty the trash bin

rm -u|-undo
	This will restore the previously deleted file.

rm FILE
	This will delete the file

rm -f|-force FILE
	This will permanently delete the FILE

rm -s|-size 
	This will display the size of the trash folder.

rm -h|-help
	This will show the usage.

NOTES
--

This is not supposed to mimic the commands of rm, and here are the pecularities:
1. trsh does not complain that the file is a dir, and hense all files/dirs are equal for it
2. point 1 gets away with the -r option (which is different now)
3. NONE OF THE OPTIONS OF RM WORKS AS THEY ARE SUPPOSED TO IN TRSH

WHAT IF?
--
(NEW!)

if you delete a file called "test" using trsh,
rm -v -> .... test ....
what if you create another file called "test" and then delete it?? Then 
rm -v -> .... test test@0 ....
<notice that the file in the trash is not overwritten.>

Thus if you recover test.
rm -r test,
ls . -> .... test ....
rm -v -> .... test ....

and again
rm -r test
ls . -> .... test ....
rm -v -> .... ....

Therefore if multiple files of the same name are deleted, they are stored in the trash as if it were a stack.
Thus any recover will be like popping the files from the trash stack!

TO DO!
--

If you delete multiple files with the same name in different locations and then recover them,
then they get moved to the current dir irrespective of what dir they were deleted from.

I do not know if this is a feature or a bug!
(Arguments from both sides):
BUG:     In Microsoft(R) windows(R) if a file goes to the recycle bin, then when "restored" it goes to where it was.

FEATURE: Why should I worry where the file was? Probably I was working on another project, and 
	 realized that one of the test cases I wrote for the previous project works for this one
	 So i recover the test.pl to the projects current dir, I do not want it to go to the original
	 Dir! In fact most of the time the usr uses the recover function is when he/she accidently
	 deletes something important! And hence he/she is always in the current directory!

I will take polls from friends who are linux users and find out if they really want their unix shell to 
behave like windows. If you feel so, just drop me an email, or even better, include it and send me your
trsh.pl!!! 
